var N3D={};N3D.Modules={Math:["Main","Matrix3","Matrix4","Units","Vector2","Vector3","Vector4"],Audio:["Main"],Utils:["Keys","Ajax"],Store:["Cookie"],Graphics:["Camera","Color","Scene","Material","Render","Light","Shader"],Geometry:["Lightning","Shapes","Trees"],Game:["Main"],Files:["Main"]};(function(){var c=N3D.Modules;var a=N3D.mod_priority={};var d=0;for(var b in c){N3D[b]={};a[b]=d++}})();N3D.Path=(function(){var a=document.getElementsByTagName("script");var b=a[a.length-1].src.match(/.*\//);if(b){return b[0]}return""})();N3D.require=function(){var j=Array.prototype.slice.call(arguments);var p=N3D.Modules;var l=document.getElementsByTagName("head")[0];var m=N3D.mod_priority;var o={complete:function(i){this.complete=i||this.complete},error:function(i){this.error=i||this.error},success:function(i){this.success=i||this.success}};j.sort(function(q,i){var s=m[q.split(".")[0]];var r=m[i.split(".")[0]];if(s==r){return q-i}return s-r});j=j.join(";");var g=j.match(/(\w+)(?=\.\*)/g);if(g){var d=g.length;for(var f=0;f<d;f++){var b=g[f];if(typeof p[b]!=="undefined"){j=j.replace(new RegExp(b+".\\w+[;]","g"),"");j=j.replace(new RegExp(b+"\\.\\*",""),b+"."+p[b].join(";"+b+"."))}}}j=j.split(";");function h(i){setTimeout(function(){o.error(i)},100)}var k;var c=j.length;var e=0;for(var f=0;f<c;f++){var a=j[f];n=a.split(".");if(typeof p[n[0]]=="undefined"){h(a);break}if(p[n[0]].indexOf(n[1])==-1){h(a);break}k=document.createElement("script");k.type="text/javascript";k.src=N3D.Path+(a+".js").toLowerCase();l.appendChild(k);k.onload=(function(i){return function(){if(i+1>=c){o.success()}e++}})(f);k.onerror=function(){l.removeChild(k);o.error();return false}}setTimeout(function(){o.complete()},100);delete N3D.mod_priority;return o};