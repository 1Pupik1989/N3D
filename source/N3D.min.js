var N3D={};N3D.Modules={Math:["Main","Matrix3","Matrix4","Units","Vector2","Vector3","Vector4"],Audio:["Main"],Utils:["Keys","Ajax"],Store:["Cookie"],Graphics:["Camera","Color","Scene","Material","Render","Light","Shader"],Geometry:["Lightning","Shapes","Trees"],Game:["Main"],Files:["Main"],Help:[""],String:["RegExp"]};(function(g){var f={complete:function(h){this.complete=h||this.complete;return this},error:function(h){this.error=h||this.error;return this},success:function(h){this.success=h||this.success;return this},loaded:0,unloaded:0,total:0};var d=(function(){var h=document.getElementsByTagName("script");var i=h[h.length-1].src.match(/.*\//);if(i){return i[0]}return""})();var a=N3D.Modules;var e=0;for(var b in a){a[b].priority=e;a[b].all=a[b].join(";");g[b]={};e++}function c(o){o.sort();o=o.join(";");var p=/(\w+)\.?(.*?)(?=;|$)/g;var m={};var j=[];var n,s,h,r;while((s=p.exec(o))!==null){h=s[1];r=s[2];major=a[h];if(typeof major=="undefined"){continue}if(typeof m[h]!=="undefined"){continue}n=j[major.priority];if(typeof n=="undefined"){n=j[major.priority]=[]}if(r=="*"){m[h]=true;var k=major.length;for(var l=0;l<k;l++){n.push(h+"."+major[l])}}else{if(major.all.indexOf(r)!==-1){n.push(s[0])}}}var q=[];for(var l in j){Array.prototype.push.apply(q,j[l])}return q}g.require=function(){var k=c(Array.prototype.slice.call(arguments));var h=document.getElementsByTagName("head")[0];var i=k.length;var l=[];f.total+=i;function j(){if(k.length==0){if(f.unloaded!==0){f.error.call(g,f.unloaded,l.join(","))}else{f.success.call(g)}f.complete();return false}var n=k[0];k.splice(0,1);if(document.getElementById(n)!==null){j();return false}var m=document.createElement("script");m.type="text/javascript";m.src=d+n.toLowerCase()+".js";m.id=n;h.appendChild(m);m.onerror=(function(o){return function(){l.push(o);h.removeChild(this);f.unloaded++;j(k)}})(n);m.onload=(function(o){return function(){f.loaded++;j(k)}})(n)}j(k);return f}})(N3D);