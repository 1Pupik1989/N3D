var N3D={Support:{}};function extend(c,a){var b=function(){};b.prototype=a.prototype;c.prototype=new b();c.prototype.constructor=c;return c.prototype}(function(d){var f=document.createElement("canvas");var g=false,l=false,r=false,j=false;if(typeof CanvasRenderingContext2D!=="undefined"){g=true}else{try{f.getContext("2d");g=true}catch(n){}}var m=["webgl","experimental-webgl"];var c=m.length;if(typeof WebGLRenderingContext!=="undefined"){l=true}else{for(var h=0;h<c;h++){try{var s=f.getContext(m[h]);l=true;break}catch(n){}}}if(typeof SVGSVGElement!=="undefined"){r=true}else{if(document.createElement("svg").getAttributeNS){r=true}else{if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect){r=true}}}var k=document.body||document.createElement("body");var q=k.appendChild(document.createElement("div"));q.innerHTML='<v:shape id="vml_flag1" adj="1" />';var p=q.firstChild;p.style.behavior="url(#default#VML)";j=p?typeof p.adj=="object":true;q.parentNode.removeChild(q);d.SVG=r;d.Context2D=g;d.WebGL=l;d.VML=j;d.toString=function(){return"Context 2D: "+g+"\nWebGL: "+l+"\nSVG: "+r+"\nVML: "+j}})(N3D.Support);(function(){var d=0;function b(h,m){var k=this.children={};this.childrenArray=m;if(m instanceof Array){var l=m.length;for(var j=0;j<l;j++){k[m[j]]=j}}this.name=h;this.priority=d++}b.prototype={get:function(h){var k=[];var l=this.name;if(h=="*"){for(var j in this.children){k.push(l+"."+j)}return k}else{if(typeof this.children[h]!=="undefined"){k.push(l+"."+h)}}return k}};N3D.Modules=function(){this.children={};this.act={};this.toLoad=[]};N3D.Modules.prototype={add:function(h,i){this.children[h]=new b(h,i);N3D[h]={}},get:function(h){var h=h.split(".");var j=this.children[h[0]];if(typeof j=="undefined"){return false}if(h.length==2){var i=j.get(h[1]);this.toLoad=this.toLoad.concat(i);return i.length!==0}return true}};N3D.Modules=new N3D.Modules;var c=document.getElementsByTagName("head")[0];var g=document.getElementsByTagName("script");g=g[g.length-1];var a=g.src.match(/.*\//);a=a?a[0]:"/";var f=Array.prototype.slice;var e=N3D.Modules.children;N3D.require=function(){var l=f.call(arguments);var k=l.length;l.sort(function(o,n){var i=o.split(".");var p=n.split(".");var o=e[i[0]];var n=e[p[0]];if(o.priority==n.priority){return o.children[i[1]]-n.children[p[1]]}return o-n});for(var j=0;j<k;j++){N3D.Modules.get(l[j])}l=N3D.Modules.toLoad;k=l.length;var m={complete:function(i){this.complete=i||this.complete;return this},error:function(i){this.error=i||this.error;return this},success:function(i){this.success=i||this.success;return this},loaded:[],unloaded:[],total:k};function h(){if(l.length==0){if(m.loaded.length==k&&m.unloaded.length==0){m.success()}else{m.error("Not loaded scripts: "+m.unloaded.join(", "),m.unloaded.length)}m.complete();return false}var n=l[0];l.splice(0,1);if(document.getElementById(n)!==null){h();return false}var i=document.createElement("script");i.type="text/javascript";i.id=n;i.src=a+n.toLowerCase()+".js";i.onerror=function(){m.unloaded++;h()};if(i.readyState){i.onreadystatechange=function(){if(i.readyState=="loaded"||i.readyState=="complete"){i.onreadystatechange=null;var o=n.split(".");if(o[1]=="Main"){m.loaded.push(n);h();return false}if(typeof N3D[o[0]][o[1]]!=="undefined"){m.loaded.push(n)}else{m.unloaded.push(n)}h()}}}else{i.onload=function(){m.loaded.push(n);h()}}c.appendChild(i)}h();return m}})();N3D.Modules.add("Help");N3D.Modules.add("Variable",["Main","RegExp"]);N3D.Modules.add("Math",["Main","Matrix3","Matrix4","Units","Vector2","Vector3","Vector4"]);N3D.Modules.add("Audio",["Main"]);N3D.Modules.add("Utils",["Keys","Ajax"]);N3D.Modules.add("Graphics",["Camera","Color","Scene","Material","Render","Light","Shader"]);N3D.Modules.add("Geometry",["Lightning","Shapes","Trees"]);N3D.Modules.add("Game",["Main"]);N3D.Modules.add("Files",["Main"]);