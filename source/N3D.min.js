var N3D={};N3D.Modules={Math:["Main","Matrix3","Matrix4","Units","Vector2","Vector3","Vector4"],Audio:["Main"],Utils:["Keys","Ajax"],Store:["Cookie"],Graphics:["Camera","Color","Scene","Material","Render","Light","Shader"],Geometry:["Lightning","Shapes","Trees"],Game:["Main"],Files:["Main"]};(function(){var c=N3D.Modules;var a=N3D.mod_priority={};var d=0;for(var b in c){N3D[b]={};a[b]=d++}})();N3D.Path=(function(){var a=document.getElementsByTagName("script");var b=a[a.length-1].src.match(/.*\//);if(b){return b[0]}return""})();N3D.require=function(){var j=Array.prototype.slice.call(arguments);var p=N3D.Modules;var l=document.getElementsByTagName("head")[0];var m=N3D.mod_priority;var o={complete:function(i){this.complete=i||this.complete},error:function(i){this.error=i||this.error},success:function(i){this.success=i||this.success}};var d=(function(){var i;if(window.addEventListener){return function(r){window.addEventListener("load",function(){r()},false)}}else{if(window.attachEvent){return function(r){window.attachEvent("onload",r)}}else{return function(r){window.onload=r}}}})();j.sort(function(r,i){var t=m[r.split(".")[0]];var s=m[i.split(".")[0]];if(t==s){return r-i}return t-s});j=j.join(";");var h=j.match(/(\w+)(?=\.\*)/g);if(h){var e=h.length;for(var g=0;g<e;g++){var b=h[g];if(typeof p[b]!=="undefined"){j=j.replace(new RegExp(b+".\\w+[;]","g"),"");j=j.replace(new RegExp(b+"\\.\\*",""),b+"."+p[b].join(";"+b+"."))}}}j=j.split(";");function q(i,r){setTimeout(function(){o[i](r)},100)}var k;var c=j.length;var f=0;for(var g=0;g<c;g++){var a=j[g];n=a.split(".");if(typeof p[n[0]]=="undefined"){q("error",a);break}if(p[n[0]].indexOf(n[1])==-1){q("error",a);break}k=document.createElement("script");k.type="text/javascript";k.src=N3D.Path+(a+".js").toLowerCase();l.appendChild(k);k.onload=(function(i){return function(){if(i+1>=c){d(o.success)}f++}})(g);k.onerror=function(){l.removeChild(k);o.error();return false}}q("complete");delete N3D.mod_priority;return o};