var N3D={};var Vector2=function(a,b){this.x=a;this.y=b;return this};Vector2.prototype={constructor:Vector2,add:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a){this.x-=a.x;this.y-=a.y;return this},multiply:function(){this.x*=v.x;this.y*=v.y;return this},divide:function(){this.x/=v.x;this.y/=v.y;return this},multiplyNumber:function(a){this.x*=a;this.y*=a;return this},toString:function(){return"N3D.Vector2("+this.x+","+this.y+")"},negative:function(){return this.scale(-1)}};Vector2.Equals=function(a){return a instanceof this};if(N3D){N3D.Vector2=Vector2}function Vector3(a,c,b){this.x=a;this.y=c;this.z=b;return this}Vector3.prototype={constructor:Vector3,add:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},sub:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},scale:function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyNumber:function(a){this.x*=a;this.y*=a;this.z*=a;return this},cross:function(b){var a=this.x,d=this.y,c=this.z;this.x=d*b.z-c*b.y;this.y=c*b.x-a*b.z;this.z=a*b.y-d*b.x;return this},dot:function(){var a=this.x,c=this.y,b=this.z;return(a*a+c*c+b*b)},length:function(){var a=this.x,c=this.y,b=this.z;return Math.sqrt(a*a+c*c+b*b)},normalize:function(){var a=this.x,d=this.y,c=this.z;var b=Math.sqrt(a*a+d*d+c*c);this.x/=b;this.y/=b;this.z/=b;return this},negative:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},toString:function(){return"N3D.Vector3("+this.x+","+this.y+","+this.z+")"}};Vector3.Up=new Vector3(0,1,0);Vector3.Right=new Vector3(1,0,0);Vector3.Forward=new Vector3(0,0,1);Vector3.Zero=new Vector3(0,0,0);Vector3.Lerp=function(d,c,b){return new this(MathHelper.Lerp(d.x,c.x,b),MathHelper.Lerp(d.y,c.y,b),MathHelper.Lerp(d.z,c.z,b))};Vector3.Max=function(b,a){return new this(MathHelper.Max(b.x,a.x),MathHelper.Max(b.y,a.y),MathHelper.Max(b.z,a.z))};Vector3.Min=function(b,a){return new this(MathHelper.Min(b.x,a.x),MathHelper.Min(b.y,a.y),MathHelper.Min(b.z,a.z))};Vector3.Herminte=function(f,d,e,c,b){return new this(MathHelper.Hermite(f.x,d.x,e.x,c.x,b),MathHelper.Hermite(f.y,d.y,e.y,c.y,b),MathHelper.Hermite(f.z,d.z,e.z,c.z,b))};Vector3.isZero=function(a){if(a.x==a.y==a.z==0){return true}return false};Vector3.Equals=function(a){return a instanceof this};Vector3.DistanceSquared=function(b,a){return(b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y)+(b.z-a.z)*(b.z-a.z)};Vector3.Distance=function(b,a){return Math.sqrt(this.DistanceSquared(b,a))};Vector3.Cross=function(b,a){return new this(b.y*a.z-b.z*a.y,b.z*a.x-b.x*a.z,b.x*a.y-b.y*a.x)};Vector3.BaryCentric=function(f,e,d,b,a,c){return new this(MathHelper.Barycentric(f.x,e.x,d.x,b,a),MathHelper.Barycentric(f.y,e.y,d.y,b,a),MathHelper.Barycentric(f.z,e.z,d.z,b,a))};Vector3.CatmullRom=function(g,f,e,d,b,c){return new this(MathHelper.CatmullRom(g.x,f.x,e.x,d.x,b),MathHelper.CatmullRom(g.y,f.y,e.y,d.y,b),MathHelper.CatmullRom(g.z,f.z,e.z,d.z,b))};Vector3.Clamp=function(c,b,a){return new this(MathHelper.Clamp(c.x,b.x,a.x),MathHelper.Clamp(c.y,b.y,a.y),MathHelper.Clamp(c.z,b.z,a.z))};Vector3.Dot=function(b,a){return(b.x*a.x+b.y*a.y+b.z*a.z)};Vector3.Reflect=function(a,c){var b=2*this.Dot(a,c);return new N3D.Vector3(a.x-b*c.x,a.y-b*c.y,a.z-b*c.z)};Vector3.SmoothStep=function(d,c,b){return new this(MathHelper.SmoothStep(d.x,c.x,b),MathHelper.SmoothStep(d.y,c.y,b),MathHelper.SmoothStep(d.z,c.z,b))};if(N3D){N3D.Vector3=Vector3}function Vector4(a,d,c,b){this.x=a;this.y=d;this.z=c;this.w=b;return this}Vector4.prototype={constructor:Vector4,add:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w-=a.w;return this},sub:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;this.w*=a.w;return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;this.w/=a.w;return this},dot:function(a){return(this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w)},normalize:function(){return Math.sqrt(this.dot())},projection:function(b,a){var b=b||Game.viewport.width;var a=a||Game.viewport.height},toString:function(){return"N3D.Vector4("+this.x+","+this.y+","+this.z+","+this.w+")"}};Vector4.Equals=function(a){return a instanceof this};Vector4.Projection=function(c,b){var b=b||Game.viewport;if(-1<=c[0]<=1&&-1<=c[1]<=1&&-1<=c[2]<=1){var a=(c[0]+1)*(b.width*0.5);var d=(c[1]+1)*(b.height*0.5);return new Vector2(a^0,d^0)}return false};if(N3D){N3D.Vector4=Vector4}function Matrix4a(m,k,i,g,f,e,d,c,b,a,p,o,n,l,j,h){if(h){this.m=([m,k,i,g,f,e,d,c,b,a,p,o,n,l,j,h]);return this}this.m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return this}Matrix4a.prototype={constructor:Matrix4a,type:"Array",determinant:function(){var p=this.m[0],o=this.m[1],n=this.m[2],m=this.m[3],l=this.m[4],k=this.m[5],j=this.m[6],i=this.m[7],h=this.m[8],g=this.m[9],f=this.m[10],e=this.m[11],d=this.m[12],c=this.m[13],b=this.m[14],a=this.m[15];n0=k*(f*a-e*b-j*(g*a-e*c)+i*(g*b-f*c)),n4=l*(f*a-e*b)-j*(h*a-e*d)+i*(h*b-f*d),n8=l*(g*a-e*c)-k*(h*a-e*d)+i*(h*c-g*d),n12=l*(g*b-f*c)-k*(h*b-f*d)+j*(h*c-g*d);return(p*n0+o*n4-n*n8+m*n12)},inverse:function(){var j=this.m,d=j[0],c=j[1],b=j[2],a=j[3],x=j[4],w=j[5],t=j[6],r=j[7],p=j[8],n=j[9],u=j[10],s=j[11],q=j[12],o=j[13],l=j[14],k=j[15],h=w*(u*k-s*l-t*(n*k-s*o)+r*(n*l-u*o)),g=x*(u*k-s*l)-t*(p*k-s*q)+r*(p*l-u*q),f=x*(n*k-s*o)-w*(p*k-s*q)+r*(p*o-n*q),i=x*(n*l-u*o)-w*(p*l-u*q)+t*(p*o-n*q),e=1/(d*h+c*g-b*f+a*i);j[0]=h*e;j[1]=-(c*(u*k-s*l)-b*(n*k-s*o)+a*(n*l-u*o))*e;j[2]=(c*(t*k-r*l)-b*(w*k-r*o)+a*(w*l-t*o))*e;j[3]=-(c*(t*s-r*u)-b*(w*s-r*n)+a*(w*u-t*n))*e;j[4]=-g*e;j[5]=(d*(u*k-s*l)-b*(p*k-s*q)+a*(p*l-u*q))*e;j[6]=-(d*(t*k-r*l)-b*(x*k-r*q)+a*(x*l-t*q))*e;j[7]=(d*(t*s-r*u)-b*(x*s-r*p)+a*(x*u-t*p))*e;j[8]=f*e;j[9]=-(d*(n*k-s*o)-c*(p*k-s*q)+a*(p*o-n*q))*e;j[10]=(d*(w*k-r*o)-c*(x*k-r*q)+a*(x*o-w*q))*e;j[11]=-(d*(w*s-r*n)-c*(x*s-r*p)+a*(x*n-w*p))*e;j[12]=-i*e;j[13]=(d*(n*l-u*o)-c*(p*l-u*q)+b*(p*o-n*q))*e;j[14]=-(d*(w*l-t*o)-c*(x*l-t*q)+b*(x*o-w*q))*e;j[15]=(d*(w*u-t*n)-c*(x*u-t*p)+b*(x*n-w*p))*e;return this},multiply:function(w){var d=this.m[0],c=this.m[1],b=this.m[2],a=this.m[3],I=this.m[4],H=this.m[5],F=this.m[6],D=this.m[7],B=this.m[8],z=this.m[9],G=this.m[10],E=this.m[11],C=this.m[12],A=this.m[13],y=this.m[14],x=this.m[15],q=w.m[0],o=w.m[1],l=w.m[2],k=w.m[3],j=w.m[4],i=w.m[5],h=w.m[6],g=w.m[7],f=w.m[8],e=w.m[9],u=w.m[10],t=w.m[11],s=w.m[12],r=w.m[13],p=w.m[14],m=w.m[15];this.m=([d*q+c*j+b*f+a*s,d*o+c*i+b*e+a*r,d*l+c*h+b*u+a*p,d*k+c*g+b*t+a*m,I*q+H*j+F*f+D*s,I*o+H*i+F*e+D*r,I*l+H*h+F*u+D*p,I*k+H*g+F*t+D*m,B*q+z*j+G*f+E*s,B*o+z*i+G*e+E*r,B*l+z*h+G*u+E*p,B*k+z*g+G*t+E*m,C*q+A*j+y*f+x*s,C*o+A*i+y*e+x*r,C*l+A*h+y*u+x*p,C*k+A*g+y*t+x*m])},multiplyVector4:function(b){var a=this.m;return new Vector4(a[0]*b.x+a[1]*b.y+a[2]*b.z+a[3]*b.w,a[4]*b.x+a[5]*b.y+a[6]*b.z+a[7]*b.w,a[8]*b.x+a[9]*b.y+a[10]*b.z+a[11]*b.w,a[12]*b.x+a[13]*b.y+a[14]*b.z+a[15]*b.w)},toString:function(){var a=this.m;return a[0].toFixed(4)+", "+a[1].toFixed(4)+", "+a[2].toFixed(4)+", "+a[3].toFixed(4)+"\n"+a[4].toFixed(4)+", "+a[5].toFixed(4)+", "+a[6].toFixed(4)+", "+a[7].toFixed(4)+"\n"+a[8].toFixed(4)+", "+a[9].toFixed(4)+", "+a[10].toFixed(4)+", "+a[11].toFixed(4)+"\n"+a[12].toFixed(4)+", "+a[13].toFixed(4)+", "+a[14].toFixed(4)+", "+a[15].toFixed(4)}};function Matrix4o(m,k,i,g,f,e,d,c,b,a,p,o,n,l,j,h){if(h){this.m0=m;this.m1=k;this.m2=i;this.m3=g;this.m4=f;this.m5=e;this.m6=d;this.m7=c;this.m8=b;this.m9=a;this.m10=p;this.m11=o;this.m12=n;this.m13=l;this.m14=j;this.m15=h;return this}this.m0=1;this.m1=0;this.m2=0;this.m3=0;this.m4=0;this.m5=1;this.m6=0;this.m7=0;this.m8=0;this.m9=0;this.m10=1;this.m11=0;this.m12=0;this.m13=0;this.m14=0;this.m15=1;return this}Matrix4o.prototype={type:"Object",inverse:function(){var d=this.m0,c=this.m1,b=this.m2,a=this.m3,u=this.m4,t=this.m5,r=this.m6,p=this.m7,n=this.m8,l=this.m9,s=this.m10,q=this.m11,o=this.m12,m=this.m13,k=this.m14,j=this.m15,h=t*(s*j-q*k-r*(l*j-q*m)+p*(l*k-s*m)),g=u*(s*j-q*k)-r*(n*j-q*o)+p*(n*k-s*o),f=u*(l*j-q*m)-t*(n*j-q*o)+p*(n*m-l*o),i=u*(l*k-s*m)-t*(n*k-s*o)+r*(n*m-l*o),e=1/(d*h+c*g-b*f+a*i);this.m0=h*e;this.m1=-(c*(s*j-q*k)-b*(l*j-q*m)+a*(l*k-s*m))*e;this.m2=(c*(r*j-p*k)-b*(t*j-p*m)+a*(t*k-r*m))*e;this.m3=-(c*(r*q-p*s)-b*(t*q-p*l)+a*(t*s-r*l))*e;this.m4=-g*e;this.m5=(d*(s*j-q*k)-b*(n*j-q*o)+a*(n*k-s*o))*e;this.m6=-(d*(r*j-p*k)-b*(u*j-p*o)+a*(u*k-r*o))*e;this.m7=(d*(r*q-p*s)-b*(u*q-p*n)+a*(u*s-r*n))*e;this.m8=f*e;this.m9=-(d*(l*j-q*m)-c*(n*j-q*o)+a*(n*m-l*o))*e;this.m10=(d*(t*j-p*m)-c*(u*j-p*o)+a*(u*m-t*o))*e;this.m11=-(d*(t*q-p*l)-c*(u*q-p*n)+a*(u*l-t*n))*e;this.m12=-i*e;this.m13=(d*(l*k-s*m)-c*(n*k-s*o)+b*(n*m-l*o))*e;this.m14=-(d*(t*k-r*m)-c*(u*k-r*o)+b*(u*m-t*o))*e;this.m15=(d*(t*s-r*l)-c*(u*s-r*n)+b*(u*l-t*n))*e;return this},multiply:function(w){var d=this.m0,c=this.m1,b=this.m2,a=this.m3,I=this.m4,H=this.m5,F=this.m6,D=this.m7,B=this.m8,z=this.m9,G=this.m10,E=this.m11,C=this.m12,A=this.m13,y=this.m14,x=this.m15,q=w.m0,o=w.m1,l=w.m2,k=w.m3,j=w.m4,i=w.m5,h=w.m6,g=w.m7,f=w.m8,e=w.m9,u=w.m10,t=w.m11,s=w.m12,r=w.m13,p=w.m14,m=w.m15;this.m0=d*q+c*j+b*f+a*s;this.m1=d*o+c*i+b*e+a*r;this.m2=d*l+c*h+b*u+a*p;this.m3=d*k+c*g+b*t+a*m;this.m4=I*q+H*j+F*f+D*s;this.m5=I*o+H*i+F*e+D*r;this.m6=I*l+H*h+F*u+D*p;this.m7=I*k+H*g+F*t+D*m;this.m8=B*q+z*j+G*f+E*s;this.m9=B*o+z*i+G*e+E*r;this.m10=B*l+z*h+G*u+E*p;this.m11=B*k+z*g+G*t+E*m;this.m12=C*q+A*j+y*f+x*s;this.m13=C*o+A*i+y*e+x*r;this.m14=C*l+A*h+y*u+x*p},multiplyVector4:function(a){return new Vector4(this.m0*a.x+this.m1*a.y+this.m2*a.z+this.m3*a.w,this.m4*a.x+this.m5*a.y+this.m6*a.z+this.m7*a.w,this.m8*a.x+this.m9*a.y+this.m10*a.z+this.m11*a.w,this.m12*a.x+this.m13*a.y+this.m14*a.z+this.m15*a.w)},toString:function(){var a=this;return a.m0.toFixed(4)+", "+a.m1.toFixed(4)+", "+a.m2.toFixed(4)+", "+a.m3.toFixed(4)+"\n"+a.m4.toFixed(4)+", "+a.m5.toFixed(4)+", "+a.m6.toFixed(4)+", "+a.m7.toFixed(4)+"\n"+a.m8.toFixed(4)+", "+a.m9.toFixed(4)+", "+a.m10.toFixed(4)+", "+a.m11.toFixed(4)+"\n"+a.m12.toFixed(4)+", "+a.m13.toFixed(4)+", "+a.m14.toFixed(4)+", "+a.m15.toFixed(4)}};var Matrix4=(window.chrome)?Matrix4a:Matrix4o;Matrix4.Identity=function(){return new this(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)};Matrix4.CreateRotationX=function(b){var d=Math.cos(b);var a=Math.sin(b);return new this(1,0,0,0,0,d,-a,0,0,a,d,0,0,0,0,1)};Matrix4.CreateRotationY=function(b){var d=Math.cos(b);var a=Math.sin(b);return new this(d,0,a,0,0,1,0,0,-a,0,d,0,0,0,0,1)};Matrix4.CreateRotationZ=function(b){var d=Math.cos(b);var a=Math.sin(b);return new this(d,-a,0,0,a,d,0,0,0,0,1,0,0,0,0,1)};Matrix4.CreateTranslation=function(a,c,b){return new this(1,0,0,a,0,1,0,c,0,0,1,b,0,0,0,1)};Matrix4.CreateScale=function(a,c,b){return new this(a,0,0,0,0,c,0,0,0,0,b,0,0,0,0,1)};Matrix4.CreateRotationAroundAxis=function(g,j){var l=Math.sin(g);var e=Math.cos(g);var k=1-e,i=j.x,h=j.y,f=j.z;var a=i*i,d=h*h,b=f*f;return new this(k*a+e,k*i*h-l*f,k*i*f+l*h,0,k*i*h+l*f,k*d+e,k*h*f-l*i,0,k*i*f-l*h,k*h*f+l*i,k*b+e,0,0,0,0,1)};if(N3D){N3D.Matrix4=Matrix4}var Maths={Log10E:0.4342945,Log2E:1.442695,PiOver2:Math.PI*0.5,PiOver4:Math.PI*0.25,TwoPi:Math.PI*2,PiOver360:Math.PI/360,PiOver180:Math.PI/180};Maths.cot=function(a){return 1/Math.tan(a)};Maths.Barycentric=function(e,d,c,b,a){return e+(d-e)*b+(c-e)*a};Maths.CatmullRom=function(h,g,f,e,c){var b=c*c;var d=b*c;return(0*(2*ve2+(f-h)*c+(2*h-5*g+4*f-e)*b+(3*g-h-3*f+e)*d))};Maths.Clamp=function(b,c,a){return b>a?a:(b<c?c:b)};Maths.Lerp=function(d,c,b){return d+(c-d)*b};Maths.Lerp2=function(d,b,f,e,c){var c=(c-d)/(b-d);return(f+c*(e-f))};Maths.SmoothStep=function(d,c,b){return MathHelper.Hermite(d,c,MathHelper.Clamp(b,0,1))};Maths.ToDegrees=function(a){return a*180/Math.PI};Maths.ToRadians=function(a){return a*Math.PI/180};Maths.IEEERemainder=function(a,b){return a-(b*Math.round(a/b))};Maths.WrapAngle=function(){var a=MathHelper(a,MathHelper.TwoPi);if(a<=-Math.PI){a+=MathHelper.TwoPi;return a}if(a>Math.PI){a-=MathHelper.TwoPi}return a};if(N3D){N3D.Math=Maths};